@prefix  rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix  icm: <http://tio.models.tmforum.org/tio/v1.0.0/IntentCommonModel#> .
@prefix  imo: <http://tio.models.tmforum.org/tio/v1.0.0/IntentManagementOntology#> .
@prefix  pbi: <http://tio.models.tmforum.org/tio/v1.0.0/ProposalBestIntent#> .
@prefix  cat: <http://www.operator.com/Catalog#> .
@prefix spot: <http://www.sdo1.org/Models/DynamicpriceOntology#> .
@prefix  met: <http://www.sdo2.org/TelecomMetrics/Version_1.0#> .
@prefix    t: <http://www.w3.org/2006/time#> .
@prefix   ex: <http://www.example.org/IntentNamespace#> .
@prefix   iv: <https://tmforum.org/2021/07/intentValidity#> .
@prefix  itv: <https://tmforum.org/2021/07/intentTemporalValidity#> .
@prefix  cem: <http://tio.labs.tmforum.org/tio/v1.0.0/CatalystExtensionModel#> .
@prefix  xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix  arc: <http://tio.models.tmforum.org/tio/v1.0.0/IntentAcceptanceControl/> .

##### Service Intent Report ###################################################
#
# This intent report is sent on acceptance of the itnent 
# 
ex:S1R1_Intent_Accepted
  a icm:IntentReport ;
  rdfs:comment "Intent Report after accting the intent" ;
  imo:intentOwner ex:IMF_Business ;
  imo:intentHander ex:IMF_Service ;
  icm:reportsAbout ex:S1_Intent_ConnectivityService ;
  # put in the live timestamp from the time the report is created:
  icm:generated [ t:inXSDDateTimeStamp "2022-12-01T10:30:10+10:00"^^xsd:dateTime ] ;
  icm:handlingState icm:StateDegraded ;
  icm:updateState icm:StateNoUpdate ;
  icm:reportNumber 1 ;
  cem:layer "service" ;
  icm:hasExpectationReport [ rdfs:member ex:S1R1ER1_delivery ;
              rdfs:member ex:S1R1ER2_property ;
              rdfs:member ex:S1R1ER3_reporting ; 
			] ; 
.

##### Targets #################################################################
# Service resource (slice) was not yet selected and therefore the target is 
# and ampty colelction 
# Target for reporting is still the intent and therefore the same target from 
# the intent is used
ex:S1R1T1_Service 
  a icm:IndividualTarget ;
.

##### Delivery Expectation Report #############################################
# I this report, the service is not deliverd, becasue the network utilization 
# is below the threshold. 
# This means the expectation is degraded becasue of two reasons 
# 1. Delivery condition not met
# 2. The target cannot be checked against the target description and type,
#    becasue no target resource was selected yet
# The intent is in a degraded state, but from the reasons the owner knows 
# Why and can just accept the degradation
#
# The value for newtork utilization is provided.
#
ex:S1R1E1_delivery
  a icm:ExpectationReport ;
  icm:reportsAbout ex:S1E1_delivery
  icm:target ex:S1R1T1_Service ;
  icm:degraded [ a ConditionReport ;
                 icm:reportsAbout ex:S1P1_delivery_type ,
				 icm:reason icm:ReasonConditionCannotBeEvaluated ,
				            icm:ReasonNoTarget ,
                            icm:ReasonTargetResourceNotSelected ;
               ] ;		
  icm:degraded [ a ConditionReport ;
                 icm:reportsAbout ex:S1P2_delivery_condition ; 
				 icm:observation [ a met:NetworkUtilization ;
				                   icm:observed [ a icm:Quantity ;
								                  # put in the value from the knowledge base
								                  icm:value 0.6 ;
												] ;
			   ] ;
.

##### Property Expectation Report ################################################
# As there is no reasource selected to report about, none of the conditions 
# could be evaluated. 
#
ex:S1E2_property
  a icm:ExpectationReport ;
  icm:reportsAbout ex:S1E2_property ;
  icm:target ex:S1R1T1_Service ;
  icm:degraded [ a ConditionReport ;
                 icm:reportsAbout ex:S1P3_bandwidth ,
				                  ex:S1P4_service_availability ,
	 	                          ex:S1P5_service_level ,
								  ex:S1P6_location ;
				 icm:reason icm:ReasonConditionCannotBeEvaluated ,
				            icm:ReasonNoObservationAvailable ,
				            icm:ReasonNoTarget ,
                            icm:ReasonTargetResourceNotSelected ;
			   ] ,
			   
##### Reporting Expectation Report ############################################
ex:S1E3_reporting
  a icm:ReportingExpectation ;
  icm:target ex:T2_S1_Reporting ;
  icm:receiver ex:IMF_Business ;
  icm:allOf [ rdfs:member ex:S1P7_reporting ;
            ] ;
  icm:reportingInterval [ a t:Duration ;
                          t:numericDuration 10 ;
                          t:temporalUnit t:unitMinute ;
    					] ;
.

ex:S1P7_reporting
  a icm:Parameter ;
  icm:subjectContainer icm:NewEventTypes ;
  icm:intersectsWith [ rdf:li icm:ReportingIntervalExpired ;
                  rdf:li icm:IntentRejected ;
                  rdf:li icm:StateComplies ;
                  rdf:li icm:StateDegrades ;
                  rdf:li icm:HandlingEnded ;
                  rdf:li icm:UpdateRejected ;
                  rdf:li icm:UpdateFinished  ;
                ] ;
.